/*! Leaflet.ResizableControl - v1.0.0 - 2015-05-10
* https://github.com/dalbrx/Leaflet.ResizableControl
* Copyright (c) 2015 David Albrecht; Licensed MIT */
!function(a,b){if("function"==typeof define&&define.amd)define(["leaflet","jquery"],a);else if("object"==typeof exports)module.exports=a(require("leaflet","jquery"));else{if("undefined"==typeof b.L)throw"Leaflet must be loaded first";if("undefined"==typeof b.$)throw"jQuery must be loaded first";a(b.L,b.$)}}(function(a,b){return a.ResizableControl=a.Control.extend({options:{position:"bottomleft",minimizedHeight:55,minimizedWidth:.25,enlargedHeight:.6,enlargedWidth:.4,enlargeCallback:function(a){},minimizeCallback:function(a){},contentClassName:"resizable-control-content",scrollPaneClassName:"resizable-control-scrollpane",className:"resizable-control-container",jscrollpane:!0,appendOnAdd:function(a){}},initialize:function(b){a.Util.setOptions(this,b)},calcHeight:function(a){return this.calcSize(b(this._map.getContainer()).height(),a)},calcWidth:function(a){return this.calcSize(b(this._map.getContainer()).width(),a)},calcSize:function(a,b){var c=/^-?[0-9]+$/;return c.test(b)?b:a*b},onAdd:function(c){this._div=a.DomUtil.create("div",this.options.className),this._scrollPaneDiv=a.DomUtil.create("div",this.options.scrollPaneClassName,this._div),this._contentDiv=a.DomUtil.create("div",this.options.contentClassName,this._scrollPaneDiv),this._buttonResizeFull=a.DomUtil.create("button","btn btn-sm resizable-control-button-resize-full",this._div),a.DomUtil.create("span","glyphicon glyphicon-resize-full",this._buttonResizeFull);var d=this;a.DomEvent.addListener(this._buttonResizeFull,"click",function(b){a.DomEvent.stopPropagation(b),d.enlarge(),d.options.enlargeCallback(b)}),this._buttonResizeSmall=a.DomUtil.create("button","btn btn-sm resizable-control-button-resize-small",this._div),a.DomUtil.create("span","glyphicon glyphicon-resize-small",this._buttonResizeSmall),a.DomEvent.addListener(this._buttonResizeSmall,"click",function(b){a.DomEvent.stopPropagation(b),d.collapse(),d.options.minimizeCallback(b)});var e=function(){return"bottomleft"===d.options.position?{ne:".ui-resizable-ne"}:"topleft"===d.options.position?{se:".ui-resizable-se"}:"bottomright"===d.options.position?{nw:".ui-resizable-nw"}:"topright"===d.options.position?{sw:".ui-resizable-sw"}:{unknownposition:""}};return this._buttonResize=a.DomUtil.create("div","ui-resizable-handle ui-resizable-"+Object.keys(e())[0],this._div),a.DomUtil.create("span","ui-icon ui-icon-grip-diagonal-se",this._buttonResize),this.options.appendOnAdd(this._div),a.DomEvent.disableClickPropagation(this._div),a.DomEvent.on(this._div,"mousewheel",a.DomEvent.stopPropagation),b(this._div).css("height",this.calcHeight(this.options.minimizedHeight)),b(this._div).css("width",this.calcWidth(this.options.minimizedWidth)),b(this._div).resizable({handles:e(),resize:function(a,b){b.position.left=0,b.position.top=0},start:function(a,c){b(d._scrollPaneDiv).css("visibility","hidden")},stop:function(a,b){d.reinitializeScroll()}}),this._div},enlarge:function(){b(this._scrollPaneDiv).css("visibility","hidden"),b(this._div).css("height",this.calcHeight(this.options.enlargedHeight)),b(this._div).css("width",this.calcWidth(this.options.enlargedWidth)),this.reinitializeScroll()},collapse:function(){b(this._scrollPaneDiv).css("visibility","hidden"),b(this._div).css("height",this.calcHeight(this.options.minimizedHeight)),b(this._div).css("width",this.calcWidth(this.options.minimizedWidth)),this.reinitializeScroll()},isEnlarged:function(){return this._enlarged},setContent:function(a){var c=b(this._div),d=b(this._contentDiv);d.html(a),c.show();var e=b(this._scrollPaneDiv);this.options.jscrollpane?e.jScrollPane():e.css("overflow-y","scroll")},reinitializeScroll:function(){var a=b(this._scrollPaneDiv);if(this.options.jscrollpane){var c=a.data("jsp");setTimeout(function(){a.css("visibility","visible"),c.reinitialise()},500)}else a.css("visibility","visible")}}),a.ResizableControl},window);